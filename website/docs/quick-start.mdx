---
sidebar_position: 2
title: Quick Start
description: Get started with Lumenize RPC in minutes
---

# Quick Start

This guide shows you how to create a simple Durable Object with RPC support using Lumenize.

## Installation

```bash npm2yarn
npm install @lumenize/rpc
```

## Create a Durable Object

First, create a simple Counter Durable Object and wrap it with `lumenizeRpcDo`:

```typescript src/index.ts
import { lumenizeRpcDo } from '@lumenize/rpc';
import { routeDORequest } from '@lumenize/utils';
import { DurableObject } from 'cloudflare:workers';

class Counter extends DurableObject {
  count = 0;
  
  increment() {
    this.count++;
    return this.count;
  }
  
  getValue() {
    return this.count;
  }
}

// Wrap with RPC support
export const CounterDO = lumenizeRpcDo(Counter);

// Export a default worker to route RPC requests
export default {
  async fetch(request: Request, env: any): Promise<Response> {
    // Route RPC requests to the Durable Object
    const rpcResponse = await routeDORequest(request, env, { prefix: '__rpc' });
    if (rpcResponse) return rpcResponse;
    
    // Fallback for non-RPC requests
    return new Response('Counter DO Worker');
  },
};
```

## Configure Wrangler

Add the Durable Object binding to your `wrangler.jsonc`:

```jsonc wrangler
{
  "name": "my-app",
  "main": "src/index.ts",
  "compatibility_date": "2025-09-01",
  "durable_objects": {
    "bindings": [
      {
        "name": "COUNTER",
        "class_name": "CounterDO"
      }
    ]
  },
  "migrations": [
    {
      "tag": "v1",
      "new_classes": ["CounterDO"]
    }
  ]
}
```

## Test It

Write a test to verify the RPC functionality:

```typescript test
import { describe, it, expect } from 'vitest';
// @ts-expect-error - cloudflare:test module types are not consistently exported
import { SELF } from 'cloudflare:test';
import { createRpcClient } from '@lumenize/rpc';

import { CounterDO } from '../src/index';
type Counter = InstanceType<typeof CounterDO>;

describe('Counter RPC', () => {
  it('should increment the counter', async () => {
    // Create RPC client pointing to our test environment
    const client = createRpcClient<Counter>({
      transport: 'http',
      baseUrl: 'http://test',
      doBindingName: 'COUNTER',
      doInstanceNameOrId: 'test-counter',
      prefix: '__rpc',
      fetch: SELF.fetch.bind(SELF),
    });
    
    // Test increment
    const result1 = await client.increment();
    expect(result1).toBe(1);
    
    // Test again
    const result2 = await client.increment();
    expect(result2).toBe(2);
    
    // Verify getValue
    const value = await client.getValue();
    expect(value).toBe(2);
  });
});
```

## What's Next?

You now have a working Durable Object with RPC support! The code examples above are automatically extracted and tested to ensure they work correctly.

To learn more, explore the other documentation pages or check out the [Lumenize repository](https://github.com/lumenize/lumenize).
