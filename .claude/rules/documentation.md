# Documentation Rules

## Skip-Check Annotations

Three annotation levels for code blocks in `.mdx` files:

1. **`@check-example('path/to/test.ts')`** — Verified against a passing test. Required for all executable code examples before publishing.
2. **`@skip-check-approved('reason')`** — Human-reviewed and approved skip. Only humans may add this annotation. Valid reasons: `'conceptual'`, `'pseudo-code'`, etc.
3. **`@skip-check`** — Work-in-progress. Acceptable during Phase 1 drafting. Must be converted to `@check-example` or `@skip-check-approved` before publishing.

**Rules:**
- Never add `@skip-check` to final/published examples without asking the user first
- Never add `@skip-check-approved` — only humans may approve skips
- During Phase 1 narrative drafting, `@skip-check` is temporary and must be replaced in Phase 2
- Run `node tooling/check-examples/src/index.js --report` to audit remaining `@skip-check` annotations

## All Documentation is Hand-Written

- Write `.mdx` files by hand in `/website/docs/[package-name]/`
- Write API reference pages by hand (see `website/docs/auth/api-reference.mdx` for the pattern)
- Never use TypeDoc to auto-generate API docs — it is deprecated for this project
- Never use `doc-testing` to generate `.mdx` from test files — it is deprecated for this project
- Some older packages still have files generated by deprecated tooling (marked with `generated_by: doc-testing` frontmatter) — do not hand-edit those

## API Reference Pattern

For packages with public APIs, create a dedicated `api-reference.mdx` page with:
- **Summary table** at the top with links to detailed sections below
- **Environment variables table** if applicable
- **Function signatures** with options and defaults
- **Detailed sections** for each endpoint/function with request/response examples

Keep JSDoc in source code focused: parameter descriptions, return types, brief explanation, and `@see` links to the hand-written docs. Don't put lengthy examples in JSDoc.

## Sidebars

Update `website/sidebars.ts` when adding or removing doc files. Docusaurus is configured to NOT auto-populate the sidebar.

## Validation

```bash
# Fast validation during development
cd website && npm run check-examples

# Full website build
cd website && npm run build
```
