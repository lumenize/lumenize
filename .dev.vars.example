# Local development secrets
# Copy this file to .dev.vars and fill in the values

# Test token for test-endpoints service
# For local dev, use: lumenize-test-local-dev-2025
# Must match the token configured in your test-endpoints deployment
TEST_TOKEN=your-test-token-here

# Test endpoints URL
# Default: https://test-endpoints.transformation.workers.dev
# For your own deployment: https://your-test-endpoints.workers.dev
TEST_ENDPOINTS_URL=https://test-endpoints.transformation.workers.dev

# Cloudflare Log Explorer API token (for http_requests, firewall_events datasets)
# Create at: Cloudflare Dashboard → Analytics & Logs → Logs → Log Explorer
CLOUDFLARE_LOG_QUERY_TOKEN=your-log-query-token-here

# Programatically access Cloudflare Logpush logs pushed to R2
# Full URL to R2 bucket (includes account ID and bucket name)
CLOUDFLARE_R2_LOGPUSH_URL=https://YOUR-ACCOUNT-ID.r2.cloudflarestorage.com/YOUR-BUCKET-NAME

# R2 bucket name for Logpush (e.g., cloudflare-managed-03e4752d)
CLOUDFLARE_R2_BUCKET_NAME=your-bucket-name

# Cloudflare account ID (same as in R2 URL)
CLOUDFLARE_ACCOUNT_ID=your-account-id

# R2 API credentials for bucket access
# Create at: Cloudflare Dashboard → R2 → Manage R2 API Tokens
CLOUDFLARE_R2_ACCESS_KEY_ID=your-r2-access-key-id
CLOUDFLARE_R2_SECRET_ACCESS_KEY=your-r2-secret-access-key

# Cloudflare global API key
# Find at: Cloudflare Dashboard → My Profile → API Tokens → Global API Key
CLOUDFLARE_GLOBAL_API_KEY=your-global-api-key-here

# Debug logging (see @lumenize/debug for patterns)
# Examples: proxy-fetch.*, rpc.*, *
# Leave empty to disable
DEBUG=

# @lumenize/auth configuration
# See https://lumenize.com/docs/auth/api-reference#auth-config for all options
LUMENIZE_AUTH_BOOTSTRAP_EMAIL=you@example.com
# Relative (/app) or absolute (https://example.com/app)
LUMENIZE_AUTH_REDIRECT=/app
# LUMENIZE_AUTH_ISSUER=https://lumenize.local
# LUMENIZE_AUTH_AUDIENCE=https://lumenize.local
# LUMENIZE_AUTH_ACCESS_TOKEN_TTL=900
# LUMENIZE_AUTH_REFRESH_TOKEN_TTL=2592000
# LUMENIZE_AUTH_MAGIC_LINK_TTL=1800
# LUMENIZE_AUTH_INVITE_TTL=604800
# LUMENIZE_AUTH_PREFIX=/auth

# Cloudflare Turnstile (required for magic link endpoint)
# Get your secret key at: https://dash.cloudflare.com/turnstile
TURNSTILE_SECRET_KEY=your-turnstile-secret-key-here

# JWT keys for @lumenize/auth (Ed25519)
# Generate with: node -e "const c=require('crypto');const{publicKey,privateKey}=c.generateKeyPairSync('ed25519');console.log('PRIVATE:',JSON.stringify(privateKey.export({type:'pkcs8',format:'pem'})));console.log('PUBLIC:',JSON.stringify(publicKey.export({type:'spki',format:'pem'})))"

# | Day | Action        | Set PRIMARY_JWT_KEY to |
# |-----|---------------|------------------------|
# |   0 | Initial setup | BLUE                   |
# |  90 | Replace GREEN | GREEN                  |
# | 180 | Replace BLUE  | BLUE                   |
# | 270 | Replace GREEN | GREEN                  |

# BLUE key pair (test keys - not for production)
JWT_PRIVATE_KEY_BLUE="-----BEGIN PRIVATE KEY-----\nMC4C...\n-----END PRIVATE KEY-----\n"
JWT_PUBLIC_KEY_BLUE="-----BEGIN PUBLIC KEY-----\nMCow...\n-----END PUBLIC KEY-----\n"

# GREEN key pair (for rotation testing - test keys, not for production)
JWT_PRIVATE_KEY_GREEN="-----BEGIN PRIVATE KEY-----\nMC4C...\n-----END PRIVATE KEY-----\n"
JWT_PUBLIC_KEY_GREEN="-----BEGIN PUBLIC KEY-----\nMCow...\n-----END PUBLIC KEY-----\n"

PRIMARY_JWT_KEY="BLUE"
